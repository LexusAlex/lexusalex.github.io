---
layout: default
title: Вопросы и решения
comments: true
summary: Алексей Шмелев - Вопросы и решения
description: Вопросы и решения
permalink: /questions-and-solutions
nav_order: 8
---

# Вопросы и решения
{: .no_toc }

<details close markdown="block">
  <summary>
    Содержание
  </summary>
  {: .text-delta }
1. TOC
{:toc}
</details>
---

TODO Когда будет что сортировать - разбить по тегам, пока просто по большим темам.

## MySql

### Как найти строку по шаблону с помощью оператора LIKE

Оператор `LIKE` используется в выражениях sql для поиска строк подходящих под шаблон.
Шаблон включает следующие специальные символы:

- `%` - любой символ от 0 и больше
- `_` - один любой символ

Удобно использовать для поиска.

```sql
# Точное совпадение, что в принцепи равно SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` = 'Тест'
SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` LIKE 'Тест';
# Выражение должно начинатся с буквы А
SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` LIKE 'А%';
# В выражении должна быть буква а
SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` LIKE '%а';
# Самый распростаненный вариант буква А в любой позиции в выражении
SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` LIKE '%А%';
# Выражение из двух букв, любой символ + баква Б
SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` LIKE '_Б';
# Выражение где первый и тертий символ любой, второй буква K далее любой набор символов
SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` LIKE '_К_%';
# Если нужно найти строку где есть % или _ их нужно экранировать следующим образом
SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` LIKE '%\%%';
# Или так
SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` LIKE '%!%%' ESCAPE '!';
# Если нужно выбрать несколько значений используем несколько операторов LIKE
SELECT `id`,`name`, `full_title` FROM `clients` WHERE `name` LIKE '%Атак' OR `name` LIKE '%Ашан';
# Иногда требуется реализовать реристронезависимый поиск, сзелать это можно перевести все названия в верхний регистр
SELECT `id`,`name`, `full_title` FROM `clients` WHERE UPPER(`name`) LIKE UPPER('%А');
```

## Linux

### Поиск по содержимому файлов

Очень частая операция - это поиск по-содержимому файлов.
Здесь нам помогут команда `grep`

```shell
# Параметры -r рекурсивный поиск, -n номера строк, -w целые слова -i игнорировать регистр
# Будет выдан список всех мест где встречается слово Интерфейс
grep -rnwi docs/ -e "Интерфейс"
# Включить в поиск файлы только с расширением php
grep --include=*.{.php} -rnw docs/ -e "Интерфейс"
# Исключить из поиск файлы с расширением md
grep --exclude=*.md -rnw docs/ -e "Интерфейс"
# Вывести только имя файла а не весь результат
grep -rnwil docs/ -e "Интерфейс"
# Или же так, что тоже самое
grep -rwni "Интерфейс" docs/
# Вывод нескольких строк, до и после найденной
grep -rwni -C3 "Интерфейс" docs/
# Найти строку в определенном файле
grep alex /etc/passwd
```

## Git

### Добавить новый коммит отменяющий действия предыдущего

Для этого используется команда `git revert`, она отменяет одиночный коммит.

```shell
# Открыть редактор для отмены последнего коммита, новым коммитом, коммит будет сделан с обратными изменениями
git revert HEAD
# Не будет делать новый коммит, git даст возможность сделать это пользователю, файлы будут добавлены в проиндекированные файлы
git revert -n HEAD
```

Если нужно отменить один коммит эта команда предпочтительней потому, 
что история проекта не изменяется, история идет вперед, что очень правильно.
Самое главное, что здесь мы не потеряем код.