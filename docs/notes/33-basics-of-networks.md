---
layout: default
nav_order: 33
permalink: 33-basics-of-network
title: Основы сетей
parent: Заметки
description: Общая информация про то как работают сети
date: 2022-09-17 15:30:00 +3
last_modified_date: 2022-10-26 16:30:00 +3
tags:
- network
---

# Основы сетей
{: .no_toc }

<details open markdown="block">
  <summary>
    Содержание
  </summary>
  {: .text-delta }
1. TOC
{:toc}
</details>
---

Общая информация про сети. Вдруг пригодится.

## Основные определения

Типы сетей:

- PAN - персональная сеть
- LAN - локальная сеть
- CAN - кампусная сеть
- MAN - городская сеть
- WAN - глобальная сеть

Компоненты LAN:

- хост - компьютер, сервер, принтер
- устройство соединения - сетевая карта
- сетевое устройство - коммутатор, маршрутизатор
- протокол - IP, ARP, DNS, UDP

Схемы передачи данных:

- Unicast (однонаправленное) - один с одним
- Muiticast (многоадресное) - один нескольким
- Broadcast (широковещание) - один всем

Режим связи: 

- Симплекс - только в одну сторону
- Полудуплекс - в один момент времени информация идет только в одну сторону
- Дуплекс - одновременно в обе стороны

Типы оборудования:

- Активное - если для его работы нужно питание (сетевая карта, маршрутизатор)
- Пассивное - для его работы не требуется питание от сети (розетка, кабель)

Аббревиатуры:

- ISO - огранизация
- IEEE - институт
- RFC - документ

Измерения:

- кило - 1000
- мега - 1000000
- гига - 1000000000
- тера - 1000000000000

Скорости передачи данных:

- килобиты в сек - кбит/с kbps kbit/s
- мегабиты в сек - Мбит/с Mbps Mbit/s
- гигабиты в сек - Гбит/с Gbps Gbit/s

1 байт = 8 бит
B = байт, b = бит;

31.11 Mbps (мегабит в секунду) = 3.888 МБ/с (мегабайт в секунду)
1 Gbps = 125 MБ/с

- 1 килобайт = 1024(1) = 1024 байт
- 1 мегабайт = 1024(2) = 1048576 байт
- 1 гигабайт = 1024(3) = 1073741824 байт
- 1 терабайт = 1024(4) = 1099511627776 байт

## Модель сетевого взаимодействия

OSI - open systems interconnection

Уровни:

- 7 Прикладной/Application - Сообщение (данные) http ftp smtp tftp
- 6 Представления/Presentation - Сообщение (данные) формат данных ascii jpeg
- 5 Сеансовый/Session - Сообщение (данные) установка связи rpc pap
- 4 Транспортный/Transport - Сегмент(tcp)(Дейтаграмма)(udp) порт доставка данных tcp udp
- 3 Сетевой/Network - Пакет логическая адресация/ Ip адрес ipv4 ipsec
- 2 Канальный/Data Link - Кадр(Фрейм) физическая адресация MAC адрес сетевая карта ppp ethernet
- 1 Физический/Physical - Концентратор, хаб .Бит отправляет и передает биты / среда передачи, wifi адаптер usb, Коаксиальный кабель, Витая пара(utp,stp), Оптика

- Браузер не является программой прикладного уровня, программой прикладного уровня является протокол http
- На уровне представления, данные форматируются для удобного приема с двух сторон
- Сеансовый уровень определяет как будет совершаться соединение (симплекс, дуплекс, полудуплекс)
- Доставка данных может быть гарантированной или негарантированной
- Маршрутизатор = роутер
- Маршрутизация процесс нужно если нужно передать пакет в другие сети

> Порт - это число, которое используется в заголовках протоколов. Всего портов 65 536
> 1. 0 - 1023 - системные
> 2. 1024 - 49151 - пользовательские
> 3. 49152 - 65535 - динамические
> Порты разных протоколов не пересекаются
> 
> Mac адрес - уникальные идентификатор сетевого интерфейса в сетях Ethernet
> 
> Длина 48 бит , пример 38-63-BB-CC-FA-55
> Первые 6 знаков идентификатор производителя, следующие 6 идентификатор устройства

## Модель TCP/IP

(DoD - другое название модели)

- 4 Прикладной
- 3 Транспортный
- 2 Сетевой
- 1 Канальный

Модель OSI != Модель TCP/IP

Сравнение OSI и TCP/IP

- Прикладной,Представления, Сеансовый = Прикладной
- Транспортный = Транспортный
- Сетевой = Сетевой
- Канальный, Физический = Канальный

## Инкапсуляция

Это поочередное заворачивание информации для корректного чтения на каждом уровне модели OSI

- Прикладной - данные
- Транспортный - заголовок(UDP/TCP)|данные(UDP/TCP)
- Сетевой - ip заголовок|заголовок(UDP/TCP)|данные(UDP/TCP)
- Канальный - заголовок кадра(|ip заголовок|заголовок(UDP/TCP)|данные(UDP/TCP)|)концевик кадра

Обработка данных на принимающем хосте идет в обратном порядке

## Витая пара

- Разъем 8P8C (ошибочно называют RJ45)
- Ethernet != Витая пара
- Бывает много(одно) -жильный кабель
- UTP - неэкранированная витая пара
- STP - экранированная витая пара

### Разъем 8P8C

Категории разъемов:

- 5e - 100 Мбит/с (2 пары) 1000 Мбит/с (4 пары)
- 6a - 10 Гбит/с - имеет общий экран
- 7а - 10 Гбит/с - имеет общий и индивидуальный экран 

## Оптическое волокно

Для чего нужно:

- большое расстояние
- большие скорости

Из чего состоит:

- Оптическое волокно (max 255 Тбит/с)
- Внутренний заполнитель
- Центральная трубка
- Полиэтилен (промежуточная оболочка)
- Гидроизоляция
- Броня и стальных проколок
- Наружная оболочка

Оптические разъемы бывают различных типов.

## Топологии сетей

- Физическая - реальное расположение узлов в сети
- Логическая - хождение сигнала в рамках физической топологии

Пример: автомобильная развязка

- Шина - Имеет один общий проводник, и все компьютеры подключены к ней
- Кольцо - Все компьютеры подключены по кругу друг с другом
- Звезда - Все компьютеры подключены к коммутатору
- Смешанная звезда - Не обязательно есть центральное устройство
- Расширенная звезда - Дерево звезд
- Полно связная - Любой хост имеет связь с любым другим хостом

## Технологии передачи данных

- xDSL (OSI 1) - неактуальная, цифровая абонентная линия
- PLC (ЛЭП) - Связь через электрические розетки, не нужно ничего прокладывать
- Ethernet (Стандарт IEEE 802.3) - активная технология, для пакетной передачи данных
- PON - пассивная оптическая сеть

## Ethernet

- Технология пакетной передачи данных.
- Ethernet != Витая пара

Передающая среда:

- Витая пара
- Оптический кабель

Разновидности:

- 10 Мбит/с
- 100 Мбит/с
- 1 Гбит/с
- 5 Гбит/с
- 10 Гбит/с
- 40 Гбит/с
- 100 Гбит/с
- 400 Гбит/с (В разработке)
- 1 Тбит/с (В разработке)

MAC адрес - уникальный идентификатор присеваемый сетевому интерфейсу в сетях Ethernet

Длина 48 бит - 12 значное шестнадцатеричное число

Первые 6 знаков идентификатор производителя, следующие 6 идентификатор устройства

### Формат кадра

Ethernet 2 (DIX)

- Заголовок - (MAC адрес получателя(6 байт)/MAC адрес отправителя (6 байт))
- Тип (2 байта)
- Данные (46 - 1500 байт)
- Контрольная сумма CRC (4 байта)

## Домен коллизий и широковещательный домен

Коллизия - это наложение двух кадров единомоменто

Домен коллизий - часть сети, где каждый узел может создать коллизию с другим узлом

- Концентратор = Хаб - очень древние устройства
- Коммутатор = Свич
- Хаб != Свич

Широковещательный запрос - запрос всем узлам, которые находятся в одном широковещательном домене.

Широковещательный домен - логический участок сети, где все узлы могут передавать данные с помощью 
широковещания на канальном уровне

Широковещательный шторм - всплекс пакетов, который парализует работу сети, всего таких пакетов в сети
должно быть не более 10%

Маршрутизатор не передает широковещательные запросы далее.

## Протокол ARP

- ARP - Протокол определения MAC-адреса по IP адресу
- ARP запрос
- ARP ответ
- Статические и динамические записи
- Ipv6 ARP не существует, он актуален только для Ipv4

### Процесс работы

- Узел, которому нужно определить MAC адрес, формирует ARP запрос вкладывая в него известный IP и отправляет широковещательный запрос.
- Все узлы в локальной сети получают ARP запрос и сравнивают IP адрес со своим
- Если IP совпадает, узел формирует ARP ответ и указывает там свой MAC адрес

Если одному узлу нужно связаться с другим, прежде всего он ищет запись в ARP таблице.

FF:FF:FF:FF:FF:FF - широковещательный запрос

- Компьютеры в локальной сети общаются с помощью MAC адресов.

## Виды доступов к среде

- FDMA
- TDMA - множественный доступ с разделением по времени, используется разные временные слоты
- CDMA/SSMA
- CSMA/CD - Ethernet (c обнаружением)
- CSMA/CD - WI-FI (с предотвращением)
- SDMA
- PDMA