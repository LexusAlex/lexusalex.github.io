---
layout: note.njk
tags: notes
number : 11
title: SSH аутентификация по ключу
description: Добавляем возможность заходить на сервер по публичному ключу
date: 2021-01-24 23:00:00 +3
main_image: /assets/images/notes/11/main.png
gradient_image: /assets/images/notes/11/gradient.png
themes: linux ssh
---

Частой операцией для работы с linux серверами является вход на сервер по публичному ключу.

Решил сделать небольшую инструкцию, вдруг кому пригодится.

## Генерация ключа

Сгенерируем пару ключей публичный и приватный на клиенте.

Будут спрашивать имя файла, можно оставить по умолчанию либо ввести свое. Так же спрашивается парольная фраза — это пароль ключа.
Его тоже не обязательно устанавливать.

```shell
ssh-keygen -t rsa
```

В итоге в каталоге `~/.ssh` появились пара ключей вида, приватный и публичный.

```shell
id_rsa
id_rsa.pub
```

Если они уже есть, то просто используем ключ `id_rsa.pub`.

## Копирование ключа на сервер

Теперь нужно скопировать наш публичный ключ в файл `~/.ssh/authorized_keys` на сервер.


```shell
ssh-copy-id -i ~/.ssh/id_rsa.pub alex@192.168.88.226
```
или так

```shell
cat ~/.ssh/id_rsa.pub | ssh git@192.168.88.226 'cat >> ~/.ssh/authorized_keys'
```

После этого можем логиниться на сервер без пароля.

```shell
ssh alex@192.168.88.226
```