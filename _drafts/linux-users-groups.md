---
layout: post
title: Linux. Пользователи и группы
permalink: linux-users-groups
tags: linux unix
comments: true
subtitle: Управление пользователями в Linux
summary:  Управление пользователями в Linux
is_navigate: true
---

## !!!Придумать название блока

Linux является многозадачной многопользовательской операционной системой. Это значит что одновременно в
системе могут работать сразу несколько пользователей, каждый из которых может запустить несколько приложений.

Любой объект в linux имеет своего владельца. 
Доступ к этим объектам осуществляется на основании [дискреционной модели](http://www.dataved.ru/2014/02/controlled-access-models.html)
(об этом напишу отдельную статью).

Пользователи и группы хранятся в файлах данных в каталоге `/etc` :
~~~bash
#!/usr/bin/env bash
ls -l /etc/passwd /etc/shadow /etc/group /etc/gshadow
-rw-r--r-- 1 root root   963 Jan  2 23:21 /etc/passwd
-rw-r----- 1 root shadow 527 Jan  2 23:21 /etc/shadow
-rw-r--r-- 1 root root   459 Jan  2 23:21 /etc/group
-rw-r----- 1 root shadow 383 Jan  2 23:21 /etc/gshadow
~~~

Исторически эти файлы содержат простой текст с разделителями в виде двоеточий ` : `.

## Фаил паролей /etc/passwd

Фаил `/etc/passwd` содержит учетные записи пользователей, каждой строкой определяется аккаунт пользователя.
Фаил доступен для чтения всем пользователям.
>> По стандарту POSIX.1 фаил называют базой данных пользователей

Пример четырех строк из этого файла : 

```bash
root:x:0:0:root:/root:/bin/bash
smmsp:x:123:132:Mail Submission Program,,,:/var/lib/sendmail:/bin/false
nvidia-persistenced:x:121:130:NVIDIA Persistence Daemon,,,:/:/sbin/nologin
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
```
Поля файла по порядку с описанием указаны в таблице :
<div class="table-responsive">
    <table class="table table-bordered table-hover table-sm">
        <caption>/etc/passwd</caption>
          <thead class="thead-dark">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Поле</th>
              <th scope="col">Описание</th>
              <th scope="col">Комментарий</th>
              <th scope="col">Пример</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <th scope="row">login</th>
              <td>Логин пользователя или регистрационное имя</td>
              <td>Уникальное имя которое пользователь вводит при входе в систему.
                  Логин связан с UID пользователя.
                  Переименование пользователя никак не влияет на его права доступа.
                  Имя должно состоять не более чем из 32 символов. 
                  В некоторых старых версиях UNIX существует ограничение длины до 8 символов.
               </td>
               <td>test</td>
            </tr>
            <tr>
              <td>2</td>
              <th scope="row">password</th>
              <td>Хеш Пароля</td>
              <td>
                Ранее в этом поле хранился хеш пароля и использовался для входа в систему.
                Из-за соображений безопасности пароли были перенесеныв фаил `/etc/shadow`.
                Пользователь может быть создан без пароля (не рекомендуется).
               </td>
               <td>x</td>
            </tr>
            <tr>
              <td>3</td>
              <th scope="row">UID</th>
              <td>Идентификатор пользователя</td>
              <td>
                 Число максимальное значение приблизительно равное 2 <sup>32</sup> (4294967296).
                 Возможно наличие несколько пользователей с одним и тем же UID, что позволяет иметь сразу несколько имен для входа.
                 Допустимые значения UID зависят от системы, в общем случае от 0 до 65535.
                 Суперпользователь всегда имеет идентификатор 0.
                 Пользователю nobody обычно присваивается идентификатор 65534.
                 Диапазон UID от 1 до 999 резервируются под системные нужды и зависит от дистрибутива.
               </td>
               <td>0</td>
            </tr>
            <tr>
              <td>4</td>
              <th scope="row">GID</th>
              <td>Идентификатор основной группы пользователя</td>
              <td>
                 По умолчанию, в ОС Linux для каждого нового пользователя создается новая группа с таким же регистрационным именем.
                 Пользователь может принадлежать к нескольким группам.
                 Группы к которым принадлежит пользователь указываются в файле `/etc/groups`
               </td>
               <td>0</td>
            </tr>
            <tr>
              <td>5</td>
              <th scope="row">gecos</th>
              <td>Комментарии к учетной записи, содержит текст описывающий пользователя</td>
              <td>
                Поле не имеет четко построенного синтаксиса.
                 Этот текст может выводится различными программами например `finger`.
                    Поля могут указываться через запятую в следующем порядке :
                    1.полное имя.
                    2.номер офиса и здания.
                    3.рабочий телефон.
                    4.домашний телефон.
               </td>
               <td>Edward Chernenko,Marx Street 10,4554391,5454221</td>
              </tr>
              <tr>
                <td>6</td>
                <th scope="row">home</th>
                <td>Домашний каталог пользователя, куда пользователь попадает после входа в систему</td>
                <td>
                   Путь становится значением переменной среды `HOME`.
                 </td>
                 <td>/root</td>
                </tr>
              <tr>
                <td>7</td>
                <th scope="row">shell</th>
                <td>Начальный командный интерпретатор, которому передается управление после входа пользователя в систему.</td>
                <td>
                   Содержимое поля становится значением переменной среды `SHELL`.
                   Здесь может быть указана любая программа.
                 </td>
                 <td>/bin/bash</td>
              </tr>
          </tbody>
    </table>
</div>
Эксперименты
Создать пользователя больше 32 символов
Создать 

usermod -u 5000000000 test
usermod: invalid user ID '5000000000'

Типы пользователей и типы учетных записей


Debian 
Centos 
Alpine

https://habr.com/ru/post/110012/
https://sonikelf.ru/polzovatel-root-i-drugie-polzovateli-gruppy-v-linux/#vsyakoe-raznoe-o-mnogopolzovatelskoj-linux-i-administratorskom-akkaunte-root