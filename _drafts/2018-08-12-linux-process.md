--- 
layout: post 
title: Linux.Процессы и потоки
permalink: linux-process
tags: linux

--- 
##Понятие процесса

Процесс - это такой контейнер для всех ресурсов необходимых для работы программы. 

Процессор переключается между процессами, предоставляя каждому процессу долю процессорного времени - это называется многозадачным режимом работы.
По сути процесс - это действия выполненные при чтении программы, у него есть входные, выходные данные и состояние. 
Программа может быть сохранена в виде текста, процесс может только выполняться. 
Есть возможность запустить два процесса от одной программы.

## Создание  процесса

Новый процесс всегда создается за счет уже существующего процесса. Чтобы создать "процесс-потомок" родительский процесс 
выполняет системный вызов `fork()`, "процесс потомок" является копией родительского процесса. 
Далее новый процесс начинает жить "своей жизнью", например с помощью выполнения системного вызова `exec()`, загружает в пространство процесса
новую программу, при этом родитель и потомок обладают своим собственным адресным пространством.

## Завершение процесса

Процесс может быть завершен если он завершил свою работу либо при возникновении ошибок. Так же можно принудительно
завершить процесс командой `kill {pid процесса}`

## Состояния процесса

Здесь процесс может выполняться, ждать или быть заблокированным. Важно решить сколько процессорного времени какой процесс будет выполняться
за это отвечает **планировщик**. 

Планировщик - работает на самом низком уровне операционной системы, он занимается обработкой прерываний.
Планировщик использует **таблицу процессов**, в ней находятся все сведенья о состоянии процесса.

Некоторые характеристики процесса:
    
  1. Регистры
  1. Счётчик команд
  1. Слово состояния программы
  1. Указатель стека
  1. Состояние процесса
  1. Приоритет
  1. Параметры планирования
  1. Идентификатор процесса
  1. Родительский процесс
  1. Группа процесса
  1. Сигналы
  1. Время начала процесса
  1. Использованное процессорное время
  1. Процессорное время дочернего процесса
  1. Время следующего аварийного сигнала
  1. Указатель на текстовый сегмент
  1. Указатель на сегмент данных
  1. Указатель на сегмент стека
  1. Корневой каталог
  1. Рабочий каталог
  1. Дескриптор файла
  1. Идентификатор пользователя
  1. Идентификатор группы

Процесс может быть прерван множество раз, но после прерывания процесс возвращается к тому же состоянию в котором он был,
до прерывания.

## Потоки

У каждого процесса есть адресное пространство, при необходимости параллельных вычислений, выделяют **потоки**, которые
используют общую память.

Для примера можем взять процесс веб-сервера, он имеет поток диспетчера, несколько рабочих потоков. Где поток диспетчер - это
бесконечный цикл, для получения рабочего запроса, далее запрос передается рабочему потоку.


----

