---
layout: post 
title: Linux - файловая система
permalink: linux-filesystem
tags: linux
--- 

Каждый раздел жесткого диска может содержать файловую систему
Создается корень, и потом внутрь этих каталогов монтируються другие файловые системы, может быть смонтирован в любой каталог корня
Размер блока фиксированный, диск всегда фиксированный
Файловая система предлагает дерево имен

Структуры данных VFS

superblock – главный (первый) блок 
файловой системы, описывающий ее 
параметры (метаинформация о ФС)

inode – индексный узел (метаинформация о 
файле)

dentry – элемент пути (каталог)

file – 
объект, представляющий собой 
открытый файл, связанный с процессом


монтирование файловой системы

link
unlink
symlink
mkdir
rmdir
rename
 
 
Фаил - это системный интерфейс

stat file -   посмотреть информацию о файле

создать жескую ссылку  ln test test.hardlink
inode точно такой же
274778 -rw-r--r-- 2 alex alex      6 июл  8 12:57 file
274778 -rw-r--r-- 2 alex alex      6 июл  8 12:57 file.hardlink

мягкая ссылка ln -s file file.softlink
inode другой
274778 -rw-r--r-- 2 alex alex      6 июл  8 12:57 file
274778 -rw-r--r-- 2 alex alex      6 июл  8 12:57 file.hardlink
274758 lrwxrwxrwx 1 alex alex      4 июл  8 13:02 file.softlink -> file

при удалении файла

лежат одинакового размера блоки на диске, в части блокой записана мета информация, в другой части лежат пользовательские данные
при создании файла пользователькие данные были записаны в один блок, а имя файла в другой блок(inode)- хранение метаинформации
при создании жеской ссылки мы добавили еще одно имя к метаинформации файла, расширения метаинформации
при создании мягкой ссылки мы создали новый фаил , который хранит ссылку на оригинал, так же мы создали новый inode для мягкой ссылки


Просмотр содержимого каталога

Что бы просматривать каталоги используется команда ls, наверное самая известная в linux. У этой команды множество ключей.

1. -a ,--all - отображение скрытых файлов
1. -A - отображение скрытых файлов, но не отображать ссылку на родительскую директорию (..), и ссылка на текущую директорию (.)
1. -l - отображение расширенной информации о файле
    1. права доступа и тип файла
    1. количество жестких ссылок на фаил
    1. имя владельца файла
    1. имя группы владельца файла
    1. размер файла
    1. дата создания
    1. имя файла/каталога
1. -l --author - кто создал фаил
1. -l --block-size=SIZE - вывести размер файлов в определенных единицах измерения (K,M,G,T,P,E,Z,Y)
1. -B, --ignore-backups - не выводить файлы резервных копий , начинающихся с `~`
1. -C - выводить файлы колонками что включено по умолчанию
1. -d - выводить только директории без их содержимого
1. -S - сортировка по размеру, от больших к меньшим
1. -r - поменять порядок сортировки, от меньшим к большим
1. -t - сортировать файлы по времени последней модификации
1. -X - сортировать по алфавиту 

> Скрытые файлы в linix - это файлы начинающиеся с точки

> `.` - это указатель на текущую директорию, `..` - ссылка на директорию родителя

----

