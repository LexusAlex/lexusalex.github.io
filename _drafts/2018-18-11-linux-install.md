--- 
layout: post 
title: Linux. Пользователи
permalink: test-code-phpunit
tags: testCode php
comments: true

---

### Пользователи, группы

Владелец файла в unix может развать права на обьект.

Механизм диференциации
 
User - Учетная запись пользователя

Аутентификация, Авторизация
Login name (логин)
Password (пароль)
UID (пользовательский инентификатор) root UID =1
GID (группа пользователя) - он входит хотя бы в одну группу
GECOS (Real name, Work addres, work phone, home phone) (комментарий) (так сложилось исторически)
Shell (начальный командный интрепретатор)
Home directory (домашний каталог, все чем владет пользователь)


Group - Группа, нужны для того чтобы однотипным пользователям давать нужные права

GID (идентификатор группы)
Password (пароль)(не используется) / User list список членов группы
Name (имя)

Первичная группа (Primary), Дополнительный группы (Supplemantary)
$
whoami - кто мы
hostname - где мы
pwd - в каком мы каталоге

users - сколько раз вошел
who -  на каки терминалах вошел
w - нагрузка на систему 
id - информация о пользователе

sudo -i переключиться на другого пользователя
# 

Пользователь всегда находиться в трехмерном пространстве, он всегда
кем то являеться

Пользователи (кем то является)
Узлы (подключения к другим узлам)
Каталоги (двигаться по каталогам)

Механизм разграничения доступа

Субьекты (owner (владелец), group owner (группа владельцев), other (другие))

Системные вызовы open(), close(), read(), write(), execute()

Разрешения Read (R) Write (W) Execute (X)
Дополнительные атрибуты Set (Установка id при выполнении exec()) (S), Sticky on write()(T) - устанавливают доп правила

Обьекты (file1, file2, file3)

Режим доступа

SUID(для пользователя) SGID(для группы) T(доп) RWX(все остальные) RWX(группа) RWX(владелец)

0654

stat - смотреть инф о файле
chmod u+x, g+w, o-r  - можно менять режим доступа к файлу только если являемся его владельцем

s бит передачи полномочий s выполняется от лица владельца файла /usr/bin/passwd
Suidная программа, от другого лица

find /bin/ /sbin/ /usr/bin/ /usr/sbin/ -perm /u+s -ls Найти файлы с таким битом
  2621568     44 -rwsr-xr-x   1 root     root        44168 май  7  2014 /bin/ping
  
t рабоатет с каталогами, запись в каталог, изменить список
право на создании изменение и удаление, разрешает запись в каталог
только тем пользователям кто этими файлами владеет

Удаление файла из каталога запоещено при наличие бита t

Выполнение каталога значит права входа в каталог (x), несмотря на другие правав
Обращение к любому файлу в каталоге


Пользователи

Обычные пользователи /etc/passwd публичная
Теневые пользователи псевдопользователи /etc/shadow приватная

username:      password: UID: GID: GECOS: home: shell
пользователь:  хеш пароля: 1000: 1000: GECOS: домашняя дире: shell
Службы 

Пароль перенесли в скрытый фаил


--------------

Файловая система

Дерево каталогов,
Псевдофайловая система
Файловая система