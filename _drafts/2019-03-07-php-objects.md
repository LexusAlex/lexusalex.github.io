---
layout: post 
title: Объекты в php
permalink: php-objects
tags: php
---
http://php.net/manual/ru/language.oop5.basic.php
http://svyatoslav.biz/misc/psr_translation/#_PSR-2
https://ru.hexlet.io/courses/php-introduction-to-oop/lessons/classes/theory_unit


## Содержание
1. [Основные понятия](#основные-понятия)
2. [Объявление класса](#объявление-класса)
3. [Создание объекта](#создание-объекта)
4. [Свойства класса](#свойства-класса)

    
### Основные понятия

Объект - это некая предметная область, предмет или сущность, например стол, стул, человек, автомобиль, имеющий характеристики
Состояние объекта определяют его свойства или атрибуты, будет их называть характеристиками объекта, например стол - деревянный
Объект может обладать поведением (положением), то есть производить операции над свойствами, поведение называют - методами объекта.
Объекты могут взаимодействовать между собой и могут менять поведение друг друга. В php объект - это тип данных

Класс - это структура (абстракция), декларировав которую можно создать объект класса, или как еще говорят экземпляр. 
Например от класса Автомобиль можно создать объекты Nissan, Opel, Ваз

### Объявление класса

Чтобы создать объект, сначала нужно определить его класс.

В php мире принято объявлять класс в отдельном файле. Файлы и классы следует именовать одинаково, при этом структура
файлов и папок нигде не регламентируется, она зависит от специфики проекта.

Например:
1. `HtmlCodeParser`
2. `BaseMessage`
3. `TestController`
4. `BootstrapInterface`
5. `InlineAction`
6. `TestTrait`
7. `ContainerNotRegisteredException`

~~~php
<?php

namespace oop;

class Application
{
    public $object;
}

~~~

Как правило если пакет подгружается через composer, классы размещают в подкаталоге `src`, тесты в подкаталоге `tests`
Каждый класс должен быть объявлен в своем пространстве имен, при этом не стоит забывать что пространство имен - это просто строка не к чему не призывающая

Например:
N.  Класс Пространство имен Полный путь
1. `DomainException` `Zend\Http\Header\Exception`  `zend-http/src/Header/Exception/DomainException.php`   
2. `StartSession`    `Illuminate\Session\Middleware` `framework/src/Illuminate/Session/Middleware/StartSession.php`
3. `BaseYii`         `yii`                           `yii2/framework/BaseYii.php`

Чтобы работала автозагрузка классов нужно добавить пространство имен в секцию `autoload` в фаил `composer.json`.
При этом класс будет подгружен только в момент использования
~~~json
{
"autoload": {
        "psr-4": {
            "oop\\": "src/"
        }
    }
}

~~~

Узнать подробнее о composer можно в моей [статье](http://lexusalex.ru/php-composer)

### Создание объекта

Создадим объект от нашего класса `Application`, для этого используется ключевое слово `new`.
В данном случае класс определен в своем пространстве имен `oop`

~~~php
<?php
$o1 = new \oop\Application(); // () - контруктор (будет рассмотрен позже)
$o2 = new \oop\Application; // если контруктор не определен, то () можно опустить
$obj = 'oop\Application'; // или \oop\Application::class
$o3 = new $obj(); // возможно создать объект динамически, определив имя класса в строку
~~~

Важный момент при присвоениии объекта в переменную будет записан указатель на него.
Например во всех четырех случаях будет скопирована ссылка на обьект `$o1`
~~~php
<?php
$o1 = new \oop\Application();
$copy = $o1;
$copy2 = $copy;
$copy3 = $copy2;
var_dump($o1, $copy, $copy2, $copy3);

/* 
object(oop\Application)[3]
  public 'object' => null
*/
~~~

### Свойства класса

Свойства в общем понимании - это характеристики объекта. Они хоть и описываются в классе, но принадлежат объекту

~~~php
<?php

namespace oop;

class Student
{
    public $age; // null
    public $course = 0;
    public $desc = <<<'NOW'
    Описание студента
NOW;

}

~~~

Свойства могут содержать любые постоянные значения (нельзя присваивать другие переменные, вызывать функции), в которые при создании объекта можно писать, и так же читать их.

~~~php
<?php

$student1 = new \oop\Student();
$student1->age = 24;
$student1->course = 1;
$student1->desc = "Студент Вася";

$student2 = new \oop\Student();
$student2->age = 26;
$student2->course = 3;
$student2->desc = "Студент Петя";
~~~

В примере выше создали два объекта класса `Student`. Доступны любые манипуляции со свойствами, например

~~~php
<?php

unset($student2->desc); // удалим свойство из объекта, теперь при обращении к этому свойству будет Notice: Undefined property: oop\Student::$desc
$student2->test = 'Добавление свойства которого нет в классе'; // динамически добавим полноценное свойство в объект

$course = "course";
$student2->$course = 4; // возможно задать имя свойства в переменную и обращаться к ней таким образом
$student2->{"$course"} = 4; // или так
~~~

### Конструктор и деструктор

Конструктор - это специальная функция которая вызывается при создании объекта, она ничего не возвращает.
В конструктор передаются параметры которыми нужно инициализировать объект

Код можно сократить и переписать таким образом

### Модификаторы доступа


### Взаимодествие классов


Понятия объект, класс, шаблон проектирования

Используеются для решения

Каждый паттерн описывает некую повторяющуюся проблему и ключ к ее разгадке, причем таким образом, что этим ключом можно пользоваться при решении самых разнообразных задач

Цель применения

Для решения типовых задач

Реаизация и является решением задачи

Описывает решаение целого класса задач

Инкапсуляция - состояние обьекта может быть изменено только самим классом, и только там закрывать изменение из вне
Вннутренее состояние системы это дело самой системы
это принцип, согласно которому любой класс и в более широком смысле – любая часть системы, должны рассматриваться как чёрный ящик — пользователь класса или подсистемы должен видеть и использовать только интерфейс (т. е. список декларируемых свойств и методов) и не вникать во внутреннюю реализацию. 
позволяет (теоретически) минимизировать число связей между классами и подсистемами и, соответственно, упростить независимую реализацию и модификацию классов и подсистем.

Наследование -  

Полиморфизм - классы потомки как будто это класс предок

Выявление сущеностей для проекта

